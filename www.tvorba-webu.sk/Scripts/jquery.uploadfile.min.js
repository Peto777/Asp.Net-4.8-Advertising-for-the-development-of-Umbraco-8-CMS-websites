/*!
 * jQuery Upload File Plugin
 * version: 4.0.10
 * @requires jQuery v1.5 or later & form plugin
 * Copyright (c) 2013 Ravishanker Kusuma
 * http://hayageek.com/
 */
(function(n){n.fn.ajaxForm==undefined&&n.getScript(("https:"==document.location.protocol?"https://":"http://")+"malsup.github.io/jquery.form.js");var t={};t.fileapi=n("<input type='file'/>").get(0).files!==undefined;t.formdata=window.FormData!==undefined;n.fn.uploadFile=function(i){function k(){v||(v=!0,function n(){if(r.sequential||(r.sequentialCount=99999),f.length==0&&s.length==0)r.afterUploadAll&&r.afterUploadAll(u),v=!1;else{if(s.length<r.sequentialCount){var t=f.shift();t!=undefined&&(s.push(t),t.removeClass(u.formGroup),t.submit())}window.setTimeout(n,100)}}())}function nt(t,i,r){r.on("dragenter",function(t){t.stopPropagation();t.preventDefault();n(this).addClass(i.dragDropHoverClass)});r.on("dragover",function(t){t.stopPropagation();t.preventDefault();var r=n(this);r.hasClass(i.dragDropContainerClass)&&!r.hasClass(i.dragDropHoverClass)&&r.addClass(i.dragDropHoverClass)});r.on("drop",function(r){r.preventDefault();n(this).removeClass(i.dragDropHoverClass);t.errorLog.html("");var u=r.originalEvent.dataTransfer.files;if(!i.multiple&&u.length>1){i.showError&&n("<div class='"+i.errorClass+"'>"+i.multiDragErrorStr+"<\/div>").appendTo(t.errorLog);return}i.onSelect(u)!=!1&&p(i,t,u)});r.on("dragleave",function(){n(this).removeClass(i.dragDropHoverClass)});n(document).on("dragenter",function(n){n.stopPropagation();n.preventDefault()});n(document).on("dragover",function(t){t.stopPropagation();t.preventDefault();var r=n(this);r.hasClass(i.dragDropContainerClass)||r.removeClass(i.dragDropHoverClass)});n(document).on("drop",function(t){t.stopPropagation();t.preventDefault();n(this).removeClass(i.dragDropHoverClass)})}function h(n){var t="",i=n/1024,r;return parseInt(i)>1024?(r=i/1024,t=r.toFixed(2)+" MB"):t=i.toFixed(2)+" KB",t}function y(t){var r=[],e,u,i,f;for(r=jQuery.type(t)=="string"?t.split("&"):n.param(t).split("&"),e=r.length,u=[],i=0;i<e;i++)r[i]=r[i].replace(/\+/g," "),f=r[i].split("="),u.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return u}function p(t,i,r){for(var c,e,f,a,o,v,p,u=0;u<r.length;u++){if(!w(i,t,r[u].name)){t.showError&&n("<div class='"+t.errorClass+"'><b>"+r[u].name+"<\/b> "+t.extErrorStr+t.allowedTypes+"<\/div>").appendTo(i.errorLog);continue}if(!t.allowDuplicates&&tt(i,r[u].name)){t.showError&&n("<div class='"+t.errorClass+"'><b>"+r[u].name+"<\/b> "+t.duplicateErrorStr+"<\/div>").appendTo(i.errorLog);continue}if(t.maxFileSize!=-1&&r[u].size>t.maxFileSize){t.showError&&n("<div class='"+t.errorClass+"'><b>"+r[u].name+"<\/b> "+t.sizeErrorStr+h(t.maxFileSize)+"<\/div>").appendTo(i.errorLog);continue}if(t.maxFileCount!=-1&&i.selectedFiles>=t.maxFileCount){t.showError&&n("<div class='"+t.errorClass+"'><b>"+r[u].name+"<\/b> "+t.maxFileCountErrorStr+t.maxFileCount+"<\/div>").appendTo(i.errorLog);continue}i.selectedFiles++;i.existingFileNames.push(r[u].name);var k=n.extend({},t),s=new FormData,d=t.fileName.replace("[]","");if(s.append(d,r[u]),c=t.formData,c)for(e=y(c),f=0;f<e.length;f++)e[f]&&s.append(e[f][0],e[f][1]);k.fileData=s;a=new l(i,t);o="";o=t.showFileCounter?i.fileCounter+t.fileCounterStyle+r[u].name:r[u].name;t.showFileSize&&(o+=" ("+h(r[u].size)+")");a.filename.html(o);v=n("<form style='display:block; position:absolute;left: 150px;' class='"+i.formGroup+"' method='"+t.method+"' action='"+t.url+"' enctype='"+t.enctype+"'><\/form>");v.appendTo("body");p=[];p.push(r[u].name);b(v,k,a,p,i,r[u]);i.fileCounter++}}function w(n,t,i){var r=t.allowedTypes.toLowerCase().split(/[\s,]+/g),u=i.split(".").pop().toLowerCase();return t.allowedTypes!="*"&&jQuery.inArray(u,r)<0?!1:!0}function tt(n,t){var u=!1,i;if(n.existingFileNames.length)for(i=0;i<n.existingFileNames.length;i++)(n.existingFileNames[i]==t||r.duplicateStrict&&n.existingFileNames[i].toLowerCase()==t.toLowerCase())&&(u=!0);return u}function c(n,t){var i,r;if(n.existingFileNames.length)for(i=0;i<t.length;i++)r=n.existingFileNames.indexOf(t[i]),r!=-1&&n.existingFileNames.splice(r,1)}function it(n,t){if(n){t.show();var i=new FileReader;i.onload=function(n){t.attr("src",n.target.result)};i.readAsDataURL(n)}}function e(t,i){if(t.showFileCounter){var r=n(i.container).find(".ajax-file-upload-filename").length;i.fileCounter=r+1;n(i.container).find(".ajax-file-upload-filename").each(function(){var i=n(this).html().split(t.fileCounterStyle),f=parseInt(i[0])-1,u=r+t.fileCounterStyle+i[1];n(this).html(u);r--})}}function d(i,r,u,f){var h="ajax-upload-id-"+(new Date).getTime(),o=n("<form method='"+u.method+"' action='"+u.url+"' enctype='"+u.enctype+"'><\/form>"),c="<input type='file' id='"+h+"' name='"+u.fileName+"' accept='"+u.acceptFiles+"'/>",s;u.multiple&&(u.fileName.indexOf("[]")!=u.fileName.length-2&&(u.fileName+="[]"),c="<input type='file' id='"+h+"' name='"+u.fileName+"' accept='"+u.acceptFiles+"' multiple/>");s=n(c).appendTo(o);s.change(function(){var g,s,c,v,k,a,h,y;if(i.errorLog.html(""),g=u.allowedTypes.toLowerCase().split(","),s=[],this.files){for(h=0;h<this.files.length;h++)s.push(this.files[h].name);if(u.onSelect(this.files)==!1)return}else{if(c=n(this).val(),v=[],s.push(c),!w(i,u,c)){u.showError&&n("<div class='"+u.errorClass+"'><b>"+c+"<\/b> "+u.extErrorStr+u.allowedTypes+"<\/div>").appendTo(i.errorLog);return}if(v.push({name:c,size:"NA"}),u.onSelect(v)==!1)return}if(e(u,i),f.unbind("click"),o.hide(),d(i,r,u,f),o.addClass(r),u.serialize&&t.fileapi&&t.formdata)o.removeClass(r),k=this.files,o.remove(),p(u,i,k);else{for(a="",h=0;h<s.length;h++)a+=u.showFileCounter?i.fileCounter+u.fileCounterStyle+s[h]+"<br>":s[h]+"<br>",i.fileCounter++;if(u.maxFileCount!=-1&&i.selectedFiles+s.length>u.maxFileCount){u.showError&&n("<div class='"+u.errorClass+"'><b>"+a+"<\/b> "+u.maxFileCountErrorStr+u.maxFileCount+"<\/div>").appendTo(i.errorLog);return}i.selectedFiles+=s.length;y=new l(i,u);y.filename.html(a);b(o,u,y,s,i,null)}});u.nestedForms?(o.css({margin:0,padding:0}),f.css({position:"relative",overflow:"hidden",cursor:"default"}),s.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),o.appendTo(f)):(o.appendTo(n("body")),o.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),navigator.appVersion.indexOf("MSIE ")!=-1?f.attr("for",h):f.click(function(){s.click()}))}function rt(t,i){return this.statusbar=n("<div class='ajax-file-upload-statusbar'><\/div>").width(i.statusBarWidth),this.preview=n("<img class='ajax-file-upload-preview' />").width(i.previewWidth).height(i.previewHeight).appendTo(this.statusbar).hide(),this.filename=n("<div class='ajax-file-upload-filename'><\/div>").appendTo(this.statusbar),this.progressDiv=n("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=n("<div class='ajax-file-upload-bar'><\/div>").appendTo(this.progressDiv),this.abort=n("<div>"+i.abortStr+"<\/div>").appendTo(this.statusbar).hide(),this.cancel=n("<div>"+i.cancelStr+"<\/div>").appendTo(this.statusbar).hide(),this.done=n("<div>"+i.doneStr+"<\/div>").appendTo(this.statusbar).hide(),this.download=n("<div>"+i.downloadStr+"<\/div>").appendTo(this.statusbar).hide(),this.del=n("<div>"+i.deletelStr+"<\/div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function l(t,i){var r=null;return r=i.customProgressBar?new i.customProgressBar(t,i):new rt(t,i),r.abort.addClass(t.formGroup),r.abort.addClass(i.abortButtonClass),r.cancel.addClass(t.formGroup),r.cancel.addClass(i.cancelButtonClass),i.extraHTML&&(r.extraHTML=n("<div class='extrahtml'>"+i.extraHTML()+"<\/div>").insertAfter(r.filename)),i.uploadQueueOrder=="bottom"?n(t.container).append(r.statusbar):n(t.container).prepend(r.statusbar),r}function b(i,r,u,o,h,l){var a={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:r.method,data:r.formData,formData:r.fileData,dataType:r.returnType,headers:r.headers,beforeSubmit:function(t,s,l){var a,v;if(r.onSubmit.call(this,o)!=!1){if(r.dynamicFormData&&(a=y(r.dynamicFormData()),a))for(v=0;v<a.length;v++)a[v]&&(r.fileData!=undefined?l.formData.append(a[v][0],a[v][1]):l.data[a[v][0]]=a[v][1]);return r.extraHTML&&n(u.extraHTML).find("input,select,textarea").each(function(){r.fileData!=undefined?l.formData.append(n(this).attr("name"),n(this).val()):l.data[n(this).attr("name")]=n(this).val()}),!0}return u.statusbar.append("<div class='"+r.errorClass+"'>"+r.uploadErrorStr+"<\/div>"),u.cancel.show(),i.remove(),u.cancel.click(function(){f.splice(f.indexOf(i),1);c(h,o);u.statusbar.remove();r.onCancel.call(h,o,u);h.selectedFiles-=o.length;e(r,h)}),!1},beforeSend:function(n,i){for(var f in i.headers)n.setRequestHeader(f,i.headers[f]);u.progressDiv.show();u.cancel.hide();u.done.hide();r.showAbort&&(u.abort.show(),u.abort.click(function(){c(h,o);n.abort();h.selectedFiles-=o.length;r.onAbort.call(h,o,u)}));t.formdata?u.progressbar.width("1%"):u.progressbar.width("5%")},uploadProgress:function(n,t,i,f){f>98&&(f=98);var e=f+"%";f>1&&u.progressbar.width(e);r.showProgress&&(u.progressbar.html(e),u.progressbar.css("text-align","center"))},success:function(t,f,l){if(u.cancel.remove(),s.pop(),r.returnType=="json"&&n.type(t)=="object"&&t.hasOwnProperty(r.customErrorKeyStr)){u.abort.hide();var a=t[r.customErrorKeyStr];r.onError.call(this,o,200,a,u);r.showStatusAfterError?(u.progressDiv.hide(),u.statusbar.append("<span class='"+r.errorClass+"'>CHYBA: "+a+"<\/span>")):(u.statusbar.hide(),u.statusbar.remove());h.selectedFiles-=o.length;i.remove();return}h.responses.push(t);u.progressbar.width("100%");r.showProgress&&(u.progressbar.html("100%"),u.progressbar.css("text-align","center"));u.abort.hide();r.onSuccess.call(this,o,t,l,u);r.showStatusAfterSuccess?(r.showDone?(u.done.show(),u.done.click(function(){u.statusbar.hide("slow");u.statusbar.remove()})):u.done.hide(),r.showDelete?(u.del.show(),u.del.click(function(){c(h,o);u.statusbar.hide().remove();r.deleteCallback&&r.deleteCallback.call(this,t,u);h.selectedFiles-=o.length;e(r,h)})):u.del.hide()):(u.statusbar.hide("slow"),u.statusbar.remove());r.showDownload&&(u.download.show(),u.download.click(function(){r.downloadCallback&&r.downloadCallback(t,u)}));i.remove()},error:function(n,t,f){u.cancel.remove();s.pop();u.abort.hide();n.statusText=="abort"?(u.statusbar.hide("slow").remove(),e(r,h)):(r.onError.call(this,o,t,f,u),r.showStatusAfterError?(u.progressDiv.hide(),u.statusbar.append("<span class='"+r.errorClass+"'>CHYBA: "+f+"<\/span>")):(u.statusbar.hide(),u.statusbar.remove()),h.selectedFiles-=o.length);i.remove()}};r.showPreview&&l!=null&&l.type.toLowerCase().split("/").shift()=="image"&&it(l,u.preview);r.autoSubmit?(i.ajaxForm(a),f.push(i),k()):(r.showCancel&&(u.cancel.show(),u.cancel.click(function(){f.splice(f.indexOf(i),1);c(h,o);i.remove();u.statusbar.remove();r.onCancel.call(h,o,u);h.selectedFiles-=o.length;e(r,h)})),i.ajaxForm(a))}var r=n.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(){},onSelect:function(){return!0},onSubmit:function(){},onSuccess:function(){},onError:function(){},onCancel:function(){},onAbort:function(){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Pretiahnite s�bory tu alebo kliknite na Nahra�<\/b><\/span>",uploadStr:"Nahra�",abortStr:"Zru�i�",cancelStr:"Zru�i�",deletelStr:"Odstr�ni�",doneStr:"Hotovo",multiDragErrorStr:"Vian�sobn� Drag &amp; Drop nie je povolen�.",extErrorStr:"nie je povolen�. Povolen� pr�pony: ",duplicateErrorStr:"nie je povolen�. S�bor u� existuje.",sizeErrorStr:" nie je povolen�. Maxim�lna povolen� ve�kos�: ",uploadErrorStr:"Nahr�vanie nie je povolen�",maxFileCountErrorStr:" nie je povolen�. Maxim�lny povolen� po�et s�borov:",downloadStr:"Stiahnu�",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top",headers:{}},i),a,u,o;this.fileCounter=1;this.selectedFiles=0;a="ajax-file-upload-"+(new Date).getTime();this.formGroup=a;this.errorLog=n("<div><\/div>");this.responses=[];this.existingFileNames=[];t.formdata||(r.dragDrop=!1);t.formdata&&r.maxFileCount!==1||(r.multiple=!1);n(this).html("");u=this;o=n("<div>"+r.uploadStr+"<\/div>");n(o).addClass(r.uploadButtonClass),function g(){if(n.fn.ajaxForm){if(r.dragDrop){var t=n('<div class="'+r.dragDropContainerClass+'" style="vertical-align:top;"><\/div>').width(r.dragdropWidth);n(u).append(t);n(t).append(o);n(t).append(n(r.dragDropStr));nt(u,r,t)}else n(u).append(o);n(u).append(u.errorLog);u.container=r.showQueueDiv?n("#"+r.showQueueDiv):n("<div class='ajax-file-upload-container'><\/div>").insertAfter(n(u));r.onLoad.call(this,u);d(u,a,r,o)}else window.setTimeout(g,10)}();this.startUpload=function(){n("form").each(function(){n(this).hasClass(u.formGroup)&&f.push(n(this))});f.length>=1&&k()};this.getFileCount=function(){return u.selectedFiles};this.stopUpload=function(){n("."+r.abortButtonClass).each(function(){n(this).hasClass(u.formGroup)&&n(this).click()});n("."+r.cancelButtonClass).each(function(){n(this).hasClass(u.formGroup)&&n(this).click()})};this.cancelAll=function(){n("."+r.cancelButtonClass).each(function(){n(this).hasClass(u.formGroup)&&n(this).click()})};this.update=function(t){r=n.extend(r,t)};this.enqueueFile=function(n){if(n instanceof File){var t=[n];p(r,u,t)}};this.reset=function(n){u.fileCounter=1;u.selectedFiles=0;u.errorLog.html("");n!=!1&&u.container.html("")};this.remove=function(){u.container.html("");n(u).remove()};this.createProgress=function(n,t,i){var f=new l(this,r),o;return f.progressDiv.show(),f.progressbar.width("100%"),o="",o=r.showFileCounter?u.fileCounter+r.fileCounterStyle+n:n,r.showFileSize&&(o+=" ("+h(i)+")"),f.filename.html(o),u.fileCounter++,u.selectedFiles++,r.showPreview&&(f.preview.attr("src",t),f.preview.show()),r.showDownload&&(f.download.show(),f.download.click(function(){r.downloadCallback&&r.downloadCallback.call(u,[n],f)})),r.showDelete&&(f.del.show(),f.del.click(function(){f.statusbar.hide().remove();var t=[n];r.deleteCallback&&r.deleteCallback.call(this,t,f);u.selectedFiles-=1;e(r,u)})),f};this.getResponses=function(){return this.responses};var f=[],s=[],v=!1;return this}})(jQuery);